pkgname=megasync
version=5.12.0
revision=1
arch="x86_64"
depends="xdg-utils libnotify xz ffmpeg desktop-file-utils qt5-quickcontrols qt5-quickcontrols2 qt5-graphicaleffects"
short_desc="Automated syncing with MEGA Cloud Drive"
maintainer="louka <louka.menard.blondin@pm.me>"
license="custom:Proprietary"
homepage="https://mega.io"
checksum="5dc072d3a6590581112757791b1ce99ffc5e7a25f4c2b5e9ad6c977f2ee3a43a"
distfiles="https://mega.nz/linux/repo/Debian_12/amd64/megasync-Debian_12_amd64.deb"
nostrip=yes
repository=nonfree

post_extract() {
    rm -r etc
}

do_install() {
    vinstall usr/share/applications/megasync.desktop 0644 usr/share/applications

    vmkdir opt
    vcopy opt/megasync opt

    vmkdir usr/bin
    ln -s usr/bin/megasync ${DESTDIR}/usr/bin/megasync

    vcopy usr/share/icons usr/share/icons
}

post_install() {
    vbin usr/bin/megasync
}
