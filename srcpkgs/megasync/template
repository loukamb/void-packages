pkgname=megasync
version=5.7.1.0
revision=1
arch="x86_64"
depends="xdg-utils libnotify xz ffmpeg desktop-file-utils qt5-quickcontrols qt5-quickcontrols2 qt5-graphicaleffects"
short_desc="Automated syncing with MEGA Cloud Drive"
maintainer="louka <louka.menard.blondin@pm.me>"
license="custom:Proprietary"
homepage="https://mega.io"
checksum="59de57ae5ca429b9d095c2d5a483ef1378eb9177f5b082c2e105f5f24885f706"
distfiles="https://mega.nz/linux/repo/Debian_12/amd64/megasync_5.7.1-1.1_amd64.deb"
nostrip=yes
repository=nonfree

post_extract() {
    rm -r etc
}

do_install() {
    vinstall usr/share/applications/megasync.desktop 0644 usr/share/applications

    vmkdir opt
    vcopy opt/megasync opt

    vmkdir usr/bin
    ln -s usr/bin/megasync ${DESTDIR}/usr/bin/megasync

    vcopy usr/share/icons usr/share/icons
}

post_install() {
    vbin usr/bin/megasync
}
